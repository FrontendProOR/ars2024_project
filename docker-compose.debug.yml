version: "3.4"
services:
  consul:
    command: "agent -server -ui -node=server-1 -bootstrap-expect=1 -client=0.0.0.0 -dev"
    environment:
      - CONSUL_LOCAL_CONFIG={"leave_on_terminate": true}
    volumes:
      - ./cosnul_store:/consul/data
      - ./consul_debug:/consul/config

  app:
    environment:
      - PORT=8000
      - DB=consul
      - DBPORT=8500
    volumes:
      - app-data:/app/data
      - ./app_debug:/app/debug

volumes:
  consul:
  app-data:
